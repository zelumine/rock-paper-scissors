<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock, Paper, Scissors Game!</title>
    </head>
    <script>
        function capitalize(str) {
                let newStr = str.toLowerCase();
                let finalStr = newStr.split("");
                let firstLetter = newStr[0];
                firstLetter = firstLetter.toUpperCase();

                finalStr.shift(newStr[0]);

                finalStr.unshift(firstLetter);

                finalStr = finalStr.join(""); 
                return finalStr;
            }
        
        let compMove;

        function computerPlay() {
            let compNumber = Math.floor(Math.random() * 3);

            if(compNumber === 0) {
                compMove = "Rock";
            } else if (compNumber === 1) {
                compMove = "Paper";
            } else {
                compMove = "Scissors";
            }
            console.log("Computer plays: " + compMove);
        }

        let playerScore = 0;
        let computerScore = 0;

        let playerSelection = prompt("Choose rock, paper or scissors");
        playerSelection = capitalize(playerSelection);
        console.log("Player plays: " + playerSelection);

        computerPlay();
        
        let computerSelection = compMove;
        let roundNumber = 1;        
        
        function playRound(playerSelection, computerSelection) {
            if ((playerSelection === "Rock" && computerSelection === "Scissors") || (playerSelection === "Scissors" && computerSelection === "Paper") || (playerSelection === "Paper" && computerSelection === "Rock")) {
            playerScore++;
            console.log(`Player: ${playerScore} - Computer: ${computerScore}`);
            return `${playerSelection} beats ${computerSelection}. You win, congrats!`;
        } else if ((playerSelection === "Scissors" && computerSelection === "Rock") || (playerSelection === "Paper" && computerSelection === "Scissors") || (playerSelection === "Rock" && computerSelection === "Paper")) {
            computerScore++;
            console.log(`Player: ${playerScore} - Computer: ${computerScore}`);
            return `${computerSelection} beats ${playerSelection}... You lose!`;
        } else if ((playerSelection === "Scissors" && computerSelection === "Scissors") || (playerSelection === "Rock" && computerSelection === "Rock") || (playerSelection === "Paper" && computerSelection === "Paper")) {
            console.log(`Player: ${playerScore} - Computer: ${computerScore}`);
            return "Oops! It's a tie!";
        }
        }

        function newRound() {
            playerSelection = prompt("Choose rock, paper or scissors");
            playerSelection = capitalize(playerSelection);
            console.log("Player plays: " + playerSelection);
            console.log("Computer plays: " + compMove);
            console.log(playRound(playerSelection, computerSelection));
        }

        function game() {
            playRound(playerSelection, computerSelection);
            while(roundNumber < 5){
                    newRound();
                    roundNumber++;
            }
            if(playerScore > computerScore) {
                return `You have ${playerScore} points and computer has ${computerScore} points. Congrats, you win!`;
            } else if(playerScore === computerScore) {
                return `Well, it's a tie. Congrats to both of you, I guess.`;
            } else {
                return `You have ${playerScore} points and computer has ${computerScore} points. Sorry buddy, you lose.`;
            }
        }

        game();
        console.log(game());
    </script>
</html>
